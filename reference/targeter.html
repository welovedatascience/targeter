<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>targeter — targeter • targeter</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="targeter — targeter"><meta name="description" content="For each variable, the function crosses two variables: a target
to be explained and an explanatory variable.
For this purpose, these variables are converted in categorical variables by a
binning process and the statistics
are derived.
The contingency table gives the counts of each class of the explanatory
variable for each modality of the target.
A proportion is calculated as the count of profiles per class and target
modality is divided by the sum of profiles by class
(=count/sum of row counts).
An index is calculated as the proportion of profiles per class and
modality divided by the proportion of the modality of all profiles
(=proportion / (sum of column counts/sum of all counts)).
If the value of the index is high (more than one), it implies that
for this subpopulation is over-represented for this variable.
If the value of the index is equal to 1, the criterium is not
significant
If the value of the index is less than 1, it implies that
for this subpopulation is sub-represented for this variable.

Weight of Evidence and Information Value are derived for binary
and continuous targets.

"><meta property="og:description" content="For each variable, the function crosses two variables: a target
to be explained and an explanatory variable.
For this purpose, these variables are converted in categorical variables by a
binning process and the statistics
are derived.
The contingency table gives the counts of each class of the explanatory
variable for each modality of the target.
A proportion is calculated as the count of profiles per class and target
modality is divided by the sum of profiles by class
(=count/sum of row counts).
An index is calculated as the proportion of profiles per class and
modality divided by the proportion of the modality of all profiles
(=proportion / (sum of column counts/sum of all counts)).
If the value of the index is high (more than one), it implies that
for this subpopulation is over-represented for this variable.
If the value of the index is equal to 1, the criterium is not
significant
If the value of the index is less than 1, it implies that
for this subpopulation is sub-represented for this variable.

Weight of Evidence and Information Value are derived for binary
and continuous targets.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">targeter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/welovedatascience/targeter/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>targeter</h1>
      <small class="dont-index">Source: <a href="https://github.com/welovedatascience/targeter/blob/main/R/targeter.R" class="external-link"><code>R/targeter.R</code></a></small>
      <div class="d-none name"><code>targeter.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For each variable, the function crosses two variables: a target
to be explained and an explanatory variable.
For this purpose, these variables are converted in categorical variables by a
binning process and the statistics
are derived.</p><ul><li><p>The contingency table gives the counts of each class of the explanatory
variable for each modality of the target.</p></li>
<li><p>A proportion is calculated as the count of profiles per class and target
modality is divided by the sum of profiles by class
(=count/sum of row counts).</p></li>
<li><p>An index is calculated as the proportion of profiles per class and
modality divided by the proportion of the modality of all profiles
(=proportion / (sum of column counts/sum of all counts)).</p><ul><li><p>If the value of the index is high (more than one), it implies that
for this subpopulation is over-represented for this variable.</p></li>
<li><p>If the value of the index is equal to 1, the criterium is not
significant</p></li>
<li><p>If the value of the index is less than 1, it implies that
for this subpopulation is sub-represented for this variable.</p></li>
</ul></li>
<li><p>Weight of Evidence and Information Value are derived for binary
and continuous targets.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">targeter</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  description_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  target_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"autoguess"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span>, <span class="st">"numeric"</span><span class="op">)</span>,</span>
<span>  target_reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  description_target <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  analysis_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nbins <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  binning_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"clustering"</span>, <span class="st">"smart"</span><span class="op">)</span>,</span>
<span>  naming_conventions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"targeter.use_naming_conventions"</span>, default <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  useNA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"targeter.useNA"</span>, default <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dec <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  order_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"alpha"</span>, <span class="st">"count"</span>, <span class="st">"props"</span>, <span class="st">"means"</span><span class="op">)</span>,</span>
<span>  cont_target_trim <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  bxp_factor <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  num_as_categorical_nval <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  autoguess_nrows <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  woe_alternate_version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"if_continuous"</span>, <span class="st">"always"</span><span class="op">)</span>,</span>
<span>  woe_shift <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  woe_post_cluster <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  woe_post_cluster_n <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  smart_quantile_by <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  decision_tree <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  decision_tree_maxdepth <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  decision_tree_cp <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data - data.table or data.frame.</p></dd>


<dt id="arg-description-data">description_data<a class="anchor" aria-label="anchor" href="#arg-description-data"></a></dt>
<dd><p>text on the description of data.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>character - name of the variable to explain.</p></dd>


<dt id="arg-target-type">target_type<a class="anchor" aria-label="anchor" href="#arg-target-type"></a></dt>
<dd><p>character: type of target - one of 'autoguess' (default),
'binary','categorical' (&gt;2 modalities) or 'numeric'.</p></dd>


<dt id="arg-target-reference-level">target_reference_level<a class="anchor" aria-label="anchor" href="#arg-target-reference-level"></a></dt>
<dd><p>character or numeric. For categorical or
(especially) binary targets, level / value of special
interest. If `NULL“default` one will try to infer from target content.
Typically, this would be values such as TRUE or 1 or 'bad' for
 binary targets.</p></dd>


<dt id="arg-description-target">description_target<a class="anchor" aria-label="anchor" href="#arg-description-target"></a></dt>
<dd><p>text on the description of target.</p></dd>


<dt id="arg-analysis-name">analysis_name<a class="anchor" aria-label="anchor" href="#arg-analysis-name"></a></dt>
<dd><p>name of the analysis.</p></dd>


<dt id="arg-select-vars">select_vars<a class="anchor" aria-label="anchor" href="#arg-select-vars"></a></dt>
<dd><p>a list of explanatory variables. By default, NULL and
all columns are considered.</p></dd>


<dt id="arg-exclude-vars">exclude_vars<a class="anchor" aria-label="anchor" href="#arg-exclude-vars"></a></dt>
<dd><p>a list of variables to exclude from the analysis.</p></dd>


<dt id="arg-nbins">nbins<a class="anchor" aria-label="anchor" href="#arg-nbins"></a></dt>
<dd><p>The nbins is by default 10. It is the number of quantiles
to be considered.</p></dd>


<dt id="arg-binning-method">binning_method<a class="anchor" aria-label="anchor" href="#arg-binning-method"></a></dt>
<dd><p>character, one of 'quantile' (default) or
'clustering', 'smart' (parameter expansion usable).
Method used to derive the `nbins` buckets for the continuous
explanatory variables.</p></dd>


<dt id="arg-naming-conventions">naming_conventions<a class="anchor" aria-label="anchor" href="#arg-naming-conventions"></a></dt>
<dd><p>boolean - by default TRUE. It means that a certain
naming convention is respected.</p></dd>


<dt id="arg-usena">useNA<a class="anchor" aria-label="anchor" href="#arg-usena"></a></dt>
<dd><p>Two values are possible : "ifany" and "no". By default, the
 package option is "ifany".</p><ul><li><p>The value "ifany" takes in consideration the missing values
if there are any.</p></li>
<li><p>The value "no" doesn't take in consideration the missing values
in any case.</p></li>
</ul></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>- boolean (default FALSE). If TRUE some more information is
displayed in console. Could be useful
when using package on big data.</p></dd>


<dt id="arg-dec">dec<a class="anchor" aria-label="anchor" href="#arg-dec"></a></dt>
<dd><p>- integer : the number of decimal for numeric variable.
By default, the value is 2.</p></dd>


<dt id="arg-order-label">order_label<a class="anchor" aria-label="anchor" href="#arg-order-label"></a></dt>
<dd><p>character - this option output an order used for the
plot function. The parameter can only take the following values:</p><ul><li><p>"auto": for the numeric variable, the order is alphabetic.
For the categorical variable, the order is the count</p></li>
<li><p>"alpha": order alphabetic</p></li>
<li><p>"count": order decreasing of the number of observations by class</p></li>
<li><p>"props : order decreasing by the proportion of the second value of
the target</p></li>
<li><p>"means : order decreasing by the target mean (continuous target)</p></li>
</ul></dd>


<dt id="arg-cont-target-trim">cont_target_trim<a class="anchor" aria-label="anchor" href="#arg-cont-target-trim"></a></dt>
<dd><p>numeric (default 0.01). For continuous targets,
it is desirable to trim
extreme values before computing WOE. This is the trimming factor in
percentage (between 0: no trim and &lt;1).</p></dd>


<dt id="arg-bxp-factor">bxp_factor<a class="anchor" aria-label="anchor" href="#arg-bxp-factor"></a></dt>
<dd><p>(default) 1.5 for continuous target, coefficient to be
used to compute boxplot whiskers.</p></dd>


<dt id="arg-num-as-categorical-nval">num_as_categorical_nval<a class="anchor" aria-label="anchor" href="#arg-num-as-categorical-nval"></a></dt>
<dd><p>(default: 5). If a variable has less than
num_as_categorical_nval distinct values,
it will be considered and used as categorical and not numeric.</p></dd>


<dt id="arg-autoguess-nrows">autoguess_nrows<a class="anchor" aria-label="anchor" href="#arg-autoguess-nrows"></a></dt>
<dd><p>- integer (default 1000). Numbers of rows to be used
to guess the variables types.
Special value 0 could be provided and then all rows be be used.</p></dd>


<dt id="arg-woe-alternate-version">woe_alternate_version<a class="anchor" aria-label="anchor" href="#arg-woe-alternate-version"></a></dt>
<dd><p>character. Specify in which context WOE
alternate definition will be used
See vignette on  methodology. Possible values are 'if_continuous' (default)
or 'always'.</p></dd>


<dt id="arg-woe-shift">woe_shift<a class="anchor" aria-label="anchor" href="#arg-woe-shift"></a></dt>
<dd><p>numeric (default) 0.01. Shifting value in WOE computation
to prevent issues when one bucket
contains 0% or 100% of target. For binary target, some people also propose
to use 0.5.</p></dd>


<dt id="arg-woe-post-cluster">woe_post_cluster<a class="anchor" aria-label="anchor" href="#arg-woe-post-cluster"></a></dt>
<dd><p>boolean (default FALSE). Once WOE are computed, on
could cluster values to see if this
 this could be adequate to group together some modalities/buckets. Clusters
would be used in graphics. See vignette on methodology.</p></dd>


<dt id="arg-woe-post-cluster-n">woe_post_cluster_n<a class="anchor" aria-label="anchor" href="#arg-woe-post-cluster-n"></a></dt>
<dd><p>integer (default: 6). If woe_post_cluster is TRUE,
number of clusters to be used.</p></dd>


<dt id="arg-smart-quantile-by">smart_quantile_by<a class="anchor" aria-label="anchor" href="#arg-smart-quantile-by"></a></dt>
<dd><p>numeric, for binning method 'smart',
quantile step - default y step of 0.01.</p></dd>


<dt id="arg-decision-tree">decision_tree<a class="anchor" aria-label="anchor" href="#arg-decision-tree"></a></dt>
<dd><p>boolean (default FALSE). Should a decision tree be fit
on source variables.</p></dd>


<dt id="arg-decision-tree-maxdepth">decision_tree_maxdepth<a class="anchor" aria-label="anchor" href="#arg-decision-tree-maxdepth"></a></dt>
<dd><p>integer (default 3). Maximum depth for the
decision tree if one is fit.</p></dd>


<dt id="arg-decision-tree-cp">decision_tree_cp<a class="anchor" aria-label="anchor" href="#arg-decision-tree-cp"></a></dt>
<dd><p>numeric (default 0). Value for `cp` parameter in
rpart.control.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns a list of class "targeter".
This list is composed of this following elements:</p><ul><li><p>dataname - name of the analyzed dataset.</p></li>
<li><p>description_data text about the description of data</p></li>
<li><p>target - name of the target.</p></li>
<li><p>target_type - Target type, one of autoguess (default) / binary /
numeric / categorical (text is expended so "b" also works for binary)</p></li>
<li><p>description_target text about the description of target</p></li>
<li><p>analysis - name of the analysis.</p></li>
<li><p>date - date of the analysis.</p></li>
<li><p>decision_tree_model - the fitted decision tree by `rpart` (if asked so)</p></li>
<li><p>profiles : list of elements containing the result the
individual crossing per variable.
See crossvar class documentation.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="summary.targeter.html">summary.targeter</a></code></p></li>
<li><p><code><a href="plot.crossvar.html">plot.crossvar</a></code></p></li>
<li><p><code><a href="summary.crossvar.html">summary.crossvar</a></code></p></li>
<li><p><code><a href="report.html">report</a></code></p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">targeter</span><span class="op">(</span><span class="va">adult</span>,target <span class="op">=</span><span class="st">"ABOVE50K"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in data.table(variable = sort(unique(c(select_vars, exclude_vars,     names(data))))):</span> could not find function "data.table"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Lecoutre, Emilie Lejeune, WeLoveDataScience.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

